---
date: 2025-12-15
layout: post
title: N+1 문제
categories: [개발 공부]
tags: [JPA]

---

# JPA N+1 문제

## 1. N+1 문제란?

N+1 문제란, 연관 관계로 맺어진 엔티티를 조회할 때
부모 엔티티를 한 번 조회한 뒤,
각 부모에 연결된 자식 엔티티를 개별 쿼리로 N번 추가 조회하는 문제입니다.
이로 인해 총 1 + N개의 쿼리가 실행되며, 성능 저하를 유발합니다.

## 2. N+1 발생 원인

N+1 문제가 발생하는 이유는 연관 엔티티를 조회할 때 지연 로딩 방식으로 조회하기 때문입니다.
자식 엔티티를 접근할 때마다 쿼리를 생성하므로 N+1 쿼리 발생을 통한 성능 저하 및 병목 현상을
일으킵니다.

## 3. N+1 해결 방법

N+1 문제의 해결 방법은 자식 엔티티 조회시 지연 로딩이 아닌 Fetch join 을 통해 쿼리를 부르는 것입니다.

```java
select o from Order o join fetch o.member
```
fetch join을 해서 데이터를 조회시 단일 쿼리 실행으로 연관 엔티티를 전부 조회할
수 있습니다.

## 4. N+1 문제에 대한 개인적 생각

엔티티의 연관 관계가 많아질 수록 N+1 문제는 엄청난 성능 저하를 유발합니다.
개발자는 항상 N+1 문제를 인지하고 쿼리를 실행할 때 N+1 문제 발생을 원천적으로 차단해야 합니다.






