---
date: 2026-01-24
layout: post
title: 부트캠프 스프링 중간 프로젝트
categories: [자바 프로젝트]
tags: [JAVA]


---
### 황준영 개인 개발 리포트

## 1. 프로젝트 개요

1. 프로젝트 개요
   제목: 모뉴 (MoNew)

부제: MongoDB 및 PostgreSQL을 활용한 뉴스 통합 관리 및 백업·복구 시스템

소개

모뉴는 여러 뉴스 API(네이버 API, RSS(조선일보, 한국경제, 연합뉴스 등))를 통합하여 
사용자가 관심 있는 주제·키워드 중심으로 뉴스를 수집·저장·관리할 수 있는 플랫폼입니다.
단순 뉴스 피드 소비를 넘어, 다음의 맞춤형 기능을 제공합니다:

  - 중복 기사 자동 감지 및 병합 처리
  - 관심사 기반 필터링 및 뉴스 저장
  - 검색어 강조(볼드) 표시
  - 사용자 간 의견 공유를 위한 소셜 기능(댓글, 좋아요 등)
MongoDB는 뉴스 기사처럼 구조가 유연한 비정형 데이터를 저장하고, 사용자 활동 내역 조회 시 성능을 높이기 위해 사용하였습니다. PostgreSQL은 사용자 정보와 관계형 데이터를 관리하며, 백업·복구 시스템은 RDS를 중심으로 구현하였습니다.

---

## 2. 담당한 작업

- 역할: 유저 관리, 유저 활동 내역 관리, CI/CD,로그 모니터링, MongoDB 관리,AWS 배포
- 주요 기여 내용:
  - 유저 관리
  - 유저 활동 내역 관리
  - CI/CD 작성
  - 로그 모니터링
  - AWS를 활용한 서비스 배포
  - 원격 MongoDB 관리
- 구현한 기능 목록:
  - User 엔티티 서비스 , 컨트롤러, 레포지토리 레이어 구현
  - UserActivity 엔티티 서비스, 컨트롤러,레포지토리 레이어 구현
  - log-back을 활용한 자동 로그 파일 저장 기능 구현, S3에 로그 파일 저장 로직 구현
  - CI/CD 기능 구현
  - 원격 mongodb 접속 및 데이터 저장, 조회 기능 구현
  - Spring 배치를 활용한 커스텀 메트릭스 작업 기능 구현

---

## 3. 기술적 성과

- 사용한 기술 및 도입 이유:

## 조회 전용 MongoDB 활용

- 유저 활동 내역 조회 시 발생하는 다수의 집계 쿼리 및 N+1 문제를 해결하기 위해  
  조회 전용 NoSQL 데이터베이스로 MongoDB 도입
- 유저 활동 내역 전용 조회 Document를 구성하고, 키 기반 데이터 모델링을 적용하여  
  조회 성능을 개선하고 데이터 조회 및 갱신 비용을 최소화
- 유저 관련 댓글 및 기사 정보를 포함한 Document를 별도로 설계하여  
  유저 관련 데이터 변경 시 연관 Document가 자동으로 동기화되도록 구성

## Spring Batch 활용

- 배치 작업 및 배치 스케줄러의 실행 상태를 체계적으로 모니터링하고  
  관련 메타데이터를 DB에 저장하기 위해 Spring Batch 도입
- Spring Batch를 활용해 다수의 스케줄러 작업을 일괄적으로 제어하고  
  작업 수행 시간 및 처리 태스크 수를 커스텀 메트릭스로 수집하여 배치 작업 상태를 모니터링
  



---

## 🟦 Situation (유저 활동 내역 조회 성능 트러블 슈팅)

  - 유저 활동 내역 조회 시
    유저가 작성한 댓글, 좋아요한 댓글, 최근에 본 기사를 각각 조회한 뒤
    좋아요 수, 조회 수 등을 집계하는 구조로 구현되어 있었다.
    이로 인해 한 번의 요청에 다수의 집계 쿼리가 발생했고,
    전형적인 N+1 문제가 발생하고 있었다.

  - 유저 수와 댓글·기사 데이터가 증가할수록
    조회 성능이 급격히 저하되는 문제가 발생했다.

## 🟧 Task

  - 유저 활동 내역 조회 시 발생하는 다수의 집계 쿼리를 제거하고
    데이터 증가에도 안정적인 조회 성능을 유지할 수 있는 구조를 설계해야 했다.

  - 기존 RDB 기반 구조의 한계를 분석하고, 
    조회 성능에 더 적합한 대안을 검토할 필요가 있었다.

## 🟩 Action

  - 유저 활동 내역 데이터는 쓰기보다 조회 비중이 높고,
    강한 정합성보다 조회 성능이 중요한 특성을 가진다고 판단했다.

  - RDS 대신 조회 전용 NoSQL DB인 MongoDB를 도입했다.

  - MongoDB에서는 데이터 ID를 일반 필드가 아닌
    document의 key로 사용하는 Key 기반 데이터 모델링을 적용했다.

  - 이를 통해 유저 활동 내역을
    단일 document 조회만으로 가져올 수 있도록 구조를 재설계했다.

## 🟨 Result

  - 유저 활동 내역 조회 시 발생하던 다수의 집계 쿼리를 제거하고
    단 한 번의 조회로 모든 활동 데이터를 조회할 수 있도록 개선했다.

  - 댓글·기사 수에 비례해 증가하던 조회 비용을 제거했고,
    조회 복잡도를 기존 O(N)에서 O(1) 수준으로 개선했다.

  - 데이터 증가에도 조회 성능이 안정적으로 유지되는 구조를 확보했다.

---

## 🟦 Situation (MongoDB 데이터 모델링 트러블 슈팅)

  - MongoDB 도입 초기에는
    유저 하나의 document 안에
    해당 유저가 작성한 댓글과 조회한 기사 정보를 모두 저장하는 구조였다.

  - 유저 수와 댓글·기사 데이터가 증가할수록
    조회용 유저 document를 수정하는 비용이 크게 증가했다.

  - 또한 각 유저 document를 개별적으로 수정해야 했기 때문에
    코드 유지보수성과 확장성 측면에서도 문제가 발생했다.


## 🟧 Task

  - document 크기 증가로 인한 수정 비용 문제를 해결하고,
    데이터 변경 시 유지보수 비용을 줄일 수 있는 구조로 개선해야 했다.

  - 조회 성능을 유지하면서도
   데이터 갱신 비용을 최소화하는 데이터 모델링 전략이 필요했다.

## 🟩 Action

  - 유저, 댓글, 기사 데이터를 하나의 document에 포함하는 구조 대신
    역할과 책임에 따라 데이터를 분리하는 방향으로 재설계했다.

  - 조회 전용 유저 활동 document와
    갱신 대상인 댓글·기사 document를 각각 분리해 관리하도록 변경했다.

  - 이를 통해 데이터 변경 시
    필요한 document만 수정하도록 구조를 단순화했다.

## 🟨 Result

  - 불필요한 데이터 중복이 제거되면서
    MongoDB에 저장되는 document의 크기와 개수가 감소했다.

  - document 수정 비용과 DB 부하가 함께 감소했고,
    데이터 변경 로직이 단순해지면서 코드 유지보수성도 개선되었다.

  - 조회와 갱신 책임이 명확히 분리된 데이터 모델을 구축할 수 있었다.

---

## 5. 협업 및 피드백

- 팀원들과의 협업 방식:
  - PR이 올라오면 최우선으로 코드 리뷰를 진행했으며,
    세부 구현보다는 요구사항 충족 여부와 최소 구현 기준을 중심으로 검토했다.
  
  - 논의가 필요한 사항은 단순 채팅이나 DM보다는
    보이스 커뮤니케이션을 통해 직접 논의하며 팀원 간 이해와 방향성을 명확히 맞추고자 했다.
  - 다른 담당자의 도메인 코드가 필요한 경우,
    내가 먼저 관련 코드를 작성해 전달함으로써
    git conflict를 사전에 방지하고 협업 효율을 높였다.
  - 협업 과정에서 의견을 제시할 때는
    항상 명확한 근거를 함께 제시하여
    의사결정 과정의 투명성과 설득력을 높이기 위해 노력했다.

- 협업 과정에서 느낀 점:
  - 프로젝트 전반에 걸쳐 팀원들과 적극적으로 소통하려 노력한 결과,
    이슈 공유와 의사 결정이 원활하게 이루어질 수 있었다.
  
  - 팀원 간 업무 스타일이나 성향 차이가 있었지만,
    최대한 서로의 의견을 존중하며 소통하고 협업하려 노력해
    큰 갈등 없이 프로젝트를 마무리할 수 있었다.
  
  - 이번 경험을 통해 협업에서 가장 중요한 요소는
    명확한 의사 전달과 상호 존중이라는 점을 다시 한번 체감했다.

---

## 6. 코드 품질 및 최적화

- 성능 개선 작업 및 결과:
  - **원격 MONGODB 리팩토링**
    - 유저 활동 내역 조회 전용 Document 작성 및 Document 구조 개선
    - [관련 PR 링크](https://github.com/sb07-monew-team3/sb07-monew-team03/pull/85)
---

## 7. 향후 개선 사항

- 추가로 개선하고 싶은 기능:
- 아쉬웠던 점:
  - 코드 구현은 원활히 진행되었으나, 코드 리뷰과정이 구두로 진행되어 코드 리뷰 피드백을 문서화하지 못했다.
  - CI 자동 테스트가 중간에 구현되어 중간 과정까지는 실패한 테스트가 develop 브랜치에 push 되었다.
  - 코드 유지 보수성보다는 구현에 중점을 두고 코드를 구현했다.

